<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[æ‰§è¡Œ hexo å‘½ä»¤æŠ¥é”™ï¼Œæ‰¾ä¸åˆ°æ¨¡å—DTraceProviderBindings]]></title>
    <url>%2F2017%2F09%2F19%2F%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7%2F20170919%2F</url>
    <content type="text"><![CDATA[hexoæŠ¥é”™ï¼Œæ‰¾ä¸åˆ°æ¨¡å—DTraceProviderBindings æƒ…å†µæ˜¯è¿™æ ·çš„ï¼Œè¿‡äº†æœ‰ä¸€æ®µæ—¶é—´æ²¡æœ‰æ›´æ–°hexo-cliåæ¯æ¬¡ä½¿ç”¨æ— è®ºæ˜¯hexo sè¿˜æ˜¯hexo déƒ½ä¼šæŠ¥é”™ 1&quot;Cannot find module &apos;./build/Release/DTraceProviderBindings&apos;&quot; è§£å†³ æ–¹æ¡ˆæ˜¯æ‰§è¡Œ 12npm uninstall hexo-cli -gnpm install hexo-cli -g æˆ– 12yarn global remove hexo-cliyarn global add hexo-cli]]></content>
      <categories>
        <category>ç”Ÿäº§åŠ›å·¥å…·</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[iPhone é€šè¿‡ USB è¿æ¥ Macbook å°±å“ä¸ªä¸åœçš„é—®é¢˜]]></title>
    <url>%2F2017%2F09%2F18%2F%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7%2F20170918%2F</url>
    <content type="text"><![CDATA[æˆ‘çš„çº¿èƒ½æ­£å¸¸å……ç”µï¼Œä½†æ˜¯è¿æ¥æˆ‘çš„rmbpåå“ä¸ªä¸åœã€‚è¿™æ¬¡ç•™æ„äº†ä¸€ä¸‹å°±é‡è®¾PRAMå’Œé‡è®¾SMCä½†æ²¡å•¥æ•ˆæœã€‚çŒœæµ‹å¯èƒ½æ˜¯usbæ¥å£æ¾äº†ï¼Œå°è¯•è½»æ‘çº¿å¤´ä¸€ä¼šå„¿å°±è¿æ¥æ­£å¸¸äº†ã€‚ è¿™ç§æƒ…å†µåº”è¯¥æ³¨æ„ï¼š çº¿ï¼ˆä¸€å®šè¦ç”¨å®˜æ–¹çº¿ï¼‰æ˜¯ä¸æ˜¯å¥½çš„ï¼Œæ¢å°æœºå­æµ‹è¯•ä¸€ä¸‹ã€‚]]></content>
      <categories>
        <category>ç”Ÿäº§åŠ›å·¥å…·</category>
      </categories>
      <tags>
        <tag>iOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[rmbpä¸€æ¬¡æƒŠæ…Œå¤±æªçš„æ— æ³•å¯åŠ¨]]></title>
    <url>%2F2017%2F09%2F16%2F%E7%94%9F%E4%BA%A7%E5%8A%9B%E5%B7%A5%E5%85%B7%2F20170916%2F</url>
    <content type="text"><![CDATA[è·‘å»è‹¹æœç»´ä¿®åº—ç»´ä¿®å‘˜æ‹¿å‡ºä¸€æ ¹å¾ˆç ´æ—§çš„magsafeçº¿é€šç”µç„¶åå°±æŒ‰äº†å¼€æœºé”®ä¸èƒ½å¼€æœºåï¼Œå°±è¯´è¦æ”¾åœ¨ä»–é‚£ï¼Œï¼ˆè¿™ä¹ˆç®€å•ï¼‰é‚£æ€ä¹ˆè¡Œã€‚ å›å®¶å°è¯•ç½‘ä¸Šæœç´¢ä¸€ç•ªï¼Œé‡è®¾PRAMå’Œé‡è®¾SMCäº†ä¸€ä¸‹é—®é¢˜å°±å¥½äº†ã€‚ğŸ˜…ä»¥åå°±å…»æˆäº†ä¸€ä¸ªä¹ æƒ¯å‡ºäº†é—®é¢˜å…ˆé‡ç½®ã€‚ é‡è®¾PRAM å…³é—­ Macã€‚ åœ¨é”®ç›˜ä¸Šæ‰¾åˆ°ä»¥ä¸‹æŒ‰é”®çš„ä½ç½®ï¼šCommand (âŒ˜)ã€Optionã€P å’Œ Rã€‚æ‚¨éœ€è¦åœ¨æ­¥éª¤ 4 ä¸­åŒæ—¶æŒ‰ä½è¿™äº›é”®ã€‚ å¯åŠ¨ç”µè„‘ã€‚ å‡ºç°ç°å±å‰æŒ‰ä½ Command-Option-P-R é”®ã€‚ æŒ‰ä¸‹è¿™äº›é”®ï¼Œç›´åˆ°ç”µè„‘é‡æ–°å¯åŠ¨ï¼Œæ‚¨ä¼šå†æ¬¡å¬åˆ°å¯åŠ¨å£°ã€‚ç”µè„‘è‡ªè¡Œé‡å¯çš„ç¬¬ä¸‰æ¬¡ï¼Œæ‚¨å°±å¯ä»¥æ¾å¼€äº†ã€‚ é‡è®¾SMC å…³é—­ç”µè„‘ã€‚ å°† MagSafe ç”µæºé€‚é…å™¨è¿æ¥åˆ°ç”µæºå’Œ Macï¼ˆå¦‚æœå°šæœªè¿æ¥çš„è¯ï¼‰ã€‚ åœ¨å†…å»ºé”®ç›˜ä¸Šï¼ŒåŒæ—¶æŒ‰ä¸‹ï¼ˆå·¦ä¾§ï¼‰Shift-Control-Option é”®å’Œç”µæºæŒ‰é’®ã€‚è¿™ä¸ªæ­¥éª¤ä¸ä¼šå¯åŠ¨ç”µè„‘ã€‚ æ¥ä¸‹æ¥ï¼Œæ‚¨å¯ä»¥åŒæ—¶æ¾å¼€æ‰€æœ‰é”®å’Œç”µæºæŒ‰é’®ã€‚ æŒ‰ä¸‹ç”µæºæŒ‰é’®æ‰“å¼€ç”µè„‘ã€‚]]></content>
      <categories>
        <category>ç”Ÿäº§åŠ›å·¥å…·</category>
      </categories>
      <tags>
        <tag>macOS</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[PyQt5 ä¸ PyQt4 å·®åˆ«åº”ç”¨]]></title>
    <url>%2F2017%2F06%2F14%2FPython%2F20170614%2F</url>
    <content type="text"><![CDATA[æ­¤æ–‡ä¸ºå®˜ç½‘åŸæ–‡çš„ç¿»è¯‘å’Œæ•´ç† æè¿°èƒ½åŠ›æœ‰é™ï¼Œä¸ç¡®å®šçš„ç¿»è¯‘ä¼šåœ¨æ—è¾¹æ³¨é‡Šè‹±æ–‡æ›´æ–°æ—¶é—´ï¼š2017å¹´05æœˆ12æ—¥å®˜ç½‘é“¾æ¥ ä¸ä¸ PyQt4 å…¼å®¹è™½ç„¶å®é™…ä¸Šå‡çº§PyQt4å†™çš„é¡¹ç›®ä¸æ˜¯é‚£ä¹ˆç³Ÿ ä¸å†å¯¹Pythonè€ç‰ˆæœ¬æä¾›æ”¯æŒï¼ˆPython 2.6 ä¹‹å‰ï¼‰ä¸å†å®ç°PyQt4ä¸æ¨èçš„APIæ¥å£PyQt5 ä¸æ”¯æŒä»»ä½•åœ¨PyQt4ç‰ˆæœ¬ä¸­æ ‡è®°ä¸ºä¸æ¨èæˆ–èˆå¼ƒçš„Qt APIï¼ˆå¦‚æœæœ‰å°±ä¼šå½“Bugå¤„ç†ï¼‰ ä¸å†æä¾›å¤šç‰ˆæœ¬APIæ¥å£PyQt4 æ”¯æŒå¤šç‰ˆæœ¬çš„APIï¼ˆå¦‚QStringï¼ŒQVariantç­‰ï¼‰PyQt5 åªæ”¯æŒæœ€æ–°çš„APIç‰ˆæœ¬(é™¤QVariantå¤–) QVariantçš„æ”¹å˜æ˜¯å»æ‰äº† QPyNullVariant ï¼ˆåœ¨QVariantçš„å¸®åŠ©æ–‡æ¡£é‡Œä¹Ÿæœ‰æ˜¾ç¤ºï¼‰ ä¿¡å·å’Œæ’æ§½ï¼ˆSignals and Slotsï¼‰æœºåˆ¶æ›´æ–°12345# ä¸‹é¢æ‰€åˆ—å‡ºæ¥çš„è°ƒç”¨æ–¹å¼ä¸å†æ”¯æŒQObject.connect()QObject.emit()SIGNAL()SLOT() æ‰€æœ‰å«æœ‰ä»¥SIGNAL()æˆ–SLOT()è¿”å›ç»“æœä¸ºå‚æ•°çš„æ–¹æ³•ä¸å†æ”¯æŒï¼Œè½¬è€Œæä¾›å¯è°ƒç”¨æ–¹æ³•ï¼ˆå‡½æ•°ï¼‰æˆ–å·²æ†ç»‘çš„ä¿¡å·ï¼ˆa bound signalï¼‰ é£æ ¼å¯¹æ¯”ï¼ˆä»£ç ï¼‰1234567891011121314151617181920212223242526# PyQt5combo = QtWidgets.QComboBox(self)combo.activated.connect(self.onActivated)# PyQt4combo = QtWidgets.QComboBox(self)self.connect(combo, QtCore.pyqtSignal('activated(QString)'), self.onActivated)``` ### `QObject.disconnect()` è°ƒç”¨æ— å‚æ•°ï¼Œä½œç”¨æ–­æ‰æ‰€æœ‰ä¿¡å·å’Œæ’æ§½çš„è¿æ¥### TODO New-style Signals and SlotsQt implements signals with an optional argument as two separate signals, one with the argument and one without it. PyQt4 exposed both of these allowing you to connect to each of them. However, when emitting the signal, you had to use the signal appropriate to the number of arguments being emitted.PyQt5 exposes only the signal where all arguments are specified. However it allows any optional arguments to be omitted when emitting the signal.Unlike PyQt4, PyQt5 supports the definition of properties, signals and slots in classes not sub-classed from QObject (i.e. in mixins).## æ–°å¢ `QtQml` `QtQuick` æ¨¡å—å¹¶æ”¯æŒä»QMLåˆ›å»ºPythonå¯¹è±¡ä¸å†æ”¯æŒ`QtDeclarative`, `QtScript`, `QtScriptTools`æ¨¡å—ä»¥ä¸Šæ¨¡å—è¢« `QtQml` å’Œ `QtQuick` æ›¿æ¢ã€‚æ”¯æŒä»QMLåˆ›å»ºPythonå¯¹è±¡## `QtGui` æ¨¡å—æ›´æ–°QtGuiæ¨¡å—è¢«æ‹†åˆ†äº†ä¸ºQtGui, QtPrintSupport å’ŒQtWidgetsä¸‰å¤§æ¨¡å—```pythonfrom PyQt5 import QtGui, QtPrintSupport, QtWidgets QtOpenGL æ¨¡å—æ›´æ–°PyQt5çš„QtOpenGLæ¨¡å—åªæä¾›QGLContext QGLFormat å’Œ QGLWidgetç±» QtWebKit æ¨¡å—æ›´æ–°PyQt4çš„QtWebKitåœ¨PyQt5ä¸­åˆ†æˆäº†QtWebKitå’ŒQtWebKitWidgetsæ¨¡å— æ‰©å±•æ€§å¢å¼ºä¸å†æ”¯æŒpyqtconfigæ¨¡å—The PyQt5 Extension APIPyQt5 æ”¯æŒç¬¬ä¸‰æ–¹åŒ…ç›´æ¥åŸºäºPyQt5å¼€å‘(å¦‚QScintilla) dbus.mainloop.qt æ¨¡å—æ›´å12#dbus.mainloop.qtdbus.mainloop.pyqt5 # ç›¸åŒåŠŸèƒ½åªæ›´å QDataStream æ˜æ˜¾æ•°å€¼çš„å‚æ•°ä»¥æ•°å€¼å¤„ç†å’Œè¿”å›readUint8(); readInt8(); writeUInt8(); writeInt8() æ–¹æ³•åœ¨PyQt5ä¸­ä»¥æ•°å€¼ç±»å‹å†™å…¥å’Œè¿”å›ï¼ˆPyQt4ä¸­æ˜¯ä»¥æ•°å€¼æ–‡æœ¬ï¼‰ QFileDialog æ–‡ä»¶æ“ä½œæ¥å£æ›´æ–° PyQt5 PyQt4 å¤‡æ³¨ getOpenFileName() getOpenFileNameAndFilter() getOpenFileNames() getOpenFileNamesAndFilter() getSaveFileNameAndFilter() getSaveFileName() PyQt5 èˆå¼ƒäº† PyQt4 åŒåçš„æ–¹æ³• QMatrix æ–¹æ³•ä¸å†æ”¯æŒPyQt5 ä¸­å·²ç»ä¸å†æ”¯æŒ PyQt4ç§ä¸æ¨èæ–¹æ³• QMatrixPyQt5 ä¸­å¯ä»¥è€ƒè™‘ä½¿ç”¨ QPropertyAnimation QGraphicsItemAnimation æ–¹æ³•ä¸å†æ”¯æŒPyQt5 ä¸­å·²ç»ä¸å†æ”¯æŒ PyQt4ç§ä¸æ¨èæ–¹æ³• QGraphicsItemAnimationPyQt5 ä¸­å¯ä»¥è€ƒè™‘ä½¿ç”¨ QTransform QPyTextObject è¢«èˆå¼ƒPyQt4 implements the QPyTextObject as a workaround for the inability to define a Python class that is sub-classed from more than one Qt class. PyQt5 does support the ability to define a Python class that is sub-classed from more than one Qt class so long as all but one of the Qt classes are interfaces, i.e. they have been declared in C++ as such using Q_DECLARE_INTERFACE. Therefore QPyTextObject is not implemented in PyQt5. QSet åœ¨PyQt5ä¸­å®Œå…¨ç”¨ é›†åˆ å½¢å¼å®ç°pyuic5 ä¸å†æä¾› --pyqt3-wrapperå‚æ•°pyuic5 does not support the â€“pyqt3-wrapper flag of pyuic4. pyrcc5 ä¸å†æä¾› -py2 æˆ– -py3 å‚æ•°pyrcc5 cliå·¥å…·ä¸å†æ”¯æŒ -py2 æˆ–è€… -py3 å‚æ•°ã€‚å› ä¸ºè¾“å‡ºçš„ä»£ç å…¼å®¹æ‰€æœ‰Pythonç‰ˆæœ¬ï¼ˆv2.6ä»¥åçš„æ‰€æœ‰ç‰ˆæœ¬ï¼‰ PyQt5 ä¼˜åŒ– åˆä½œæ€§å¤šé‡ç»§æ‰¿ ï¼ˆCooperative Multi-inheritanceï¼‰çš„åˆå§‹åŒ–æ–¹å¼123# PyQt5 è°ƒç”¨çˆ¶ç±»çš„`__init__`æ–¹æ³•.def __init(self, **kwargs): super().__init__(**kwargs) PyQt5 è‡ªåŠ¨é‡Šæ”¾GILï¼Œè€Œä¸æ˜¯PyQt4çš„å¼ºåˆ¶é‡Šæ”¾PyQt5 é€€å‡ºæ—¶è‡ªåŠ¨è°ƒç”¨sip.setdestroyonexit()ä»¥ç¦ç”¨è‡ªåŠ¨ææ„Pythonè§£é‡Šå™¨é€€å‡ºPyQt4åº”ç”¨ç¨‹åºæ—¶ä¼šé»˜è®¤è°ƒç”¨C++ææ„å™¨å¤„ç†æ‰€æœ‰å®ƒæ‹¥æœ‰çš„çº¿ç¨‹ï¼ˆè¿™é€šå¸¸æ˜¯ä»¥éšæœºçš„é¡ºåºï¼Œå› æ­¤å¯èƒ½ä¼šå¯¼è‡´è§£æå™¨å´©æºƒï¼‰ï¼Œé€šè¿‡è°ƒç”¨ sip.setdestroyonexit() å‡½æ•°å¯ä»¥ç¦ç”¨ã€‚PyQt5 æ€»ä¼šè‡ªåŠ¨è°ƒç”¨ sip.setdestroyonexit() å‡½æ•°.]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>PyQt</tag>
        <tag>è§‚å¯Ÿè€…æ¨¡å¼</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonæ—¶é—´ç›¸å…³çš„ç±»å‹è½¬åŒ–]]></title>
    <url>%2F2017%2F06%2F13%2FPython%2F20170613%2F</url>
    <content type="text"><![CDATA[pythonæ—¶é—´ç›¸å…³çš„åº“å’Œè½¬æ¢å…³ç³» string ç±»å‹(time)1234567import time# åˆ›å»ºæ–‡æœ¬æ—¶é—´s = time.ctime() # ä»¥å½“å‰ç³»ç»Ÿåœ°åŒºæ¥å†³å®šè¾“å‡ºçš„æ—¶é—´æ–‡æœ¬æ ¼å¼s = "2008-11-10 17:53:59"# è½¬æ¢ä¸ºæ—¶é—´å¯¹è±¡t = time.strptime(s, "%Y-%m-%d %H:%M:%S") datetime å¯¹è±¡1234567891011import datetime# åˆ›å»ºdatetimeå¯¹è±¡# dt_obj = datetime.datetime.now()dt_obj = datetime.datetime(2008, 11, 10, 17, 53, 59) # è½¬æ¢ä¸ºæ–‡æœ¬å‹æ—¶é—´print(dt_obj.strftime("%Y-%m-%d %H:%M:%S")) # è½¬æ¢ä¸ºæ—¶é—´å¯¹è±¡time_tuple = dt_obj.timetuple()# è½¬åŒ–å“ªä½æ—¶é—´æˆ³time_stamp = dt_obj.timestamp() time å¯¹è±¡12345678910import time# åˆ›å»ºtimeå¯¹è±¡time_tuple = (2008, 11, 12, 13, 51, 18, 2, 317, 0)# è½¬æ¢ä¸ºæ–‡æœ¬å‹æ—¶é—´time.strftime("%Y-%m-%d %H:%M:%S", time_tuple)# è½¬æ¢ä¸ºdatetimeå¯¹è±¡datetime.datetime(*time_tuple[0:6])# è½¬æ¢ä¸ºæ—¶é—´æˆ³time.mktime(time_tuple) int ç±»å‹(æ—¶é—´æˆ³)12345678import time, datetime# è·å–å½“å‰æ—¶é—´çš„æ—¶é—´æˆ³timestamp = time.time()# è½¬æ¢ä¸º datetimeå¯¹è±¡datetime.datetime.fromtimestamp(timestamp) # æœ¬åœ°æ—¶åŒºæ—¶é—´# è½¬æ¢ä¸º timeå¯¹è±¡time.localtime(timestamp) å¸¦æ—¶åŒºçš„å¤„ç†è½¬æ¢ä¸º datetimeå¯¹è±¡123456import time, datetime# æœ¬åœ°æ—¶åŒºæ—¶é—´datetime.datetime.fromtimestamp(timestamp)# æ ‡å‡†æ—¶åŒºæ—¶é—´datetime.datetime.utcfromtimestamp(timestamp) è½¬æ¢ä¸º timeå¯¹è±¡1234# æœ¬åœ°æ—¶åŒºtime.localtime(timestamp)# æ ‡å‡†æ—¶åŒºtime.gmtime(timestamp)]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>time</tag>
        <tag>datetime</tag>
        <tag>timestamp</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Pythonçš„è§‚å¯Ÿè€…æ¨¡å¼ï¼ŒPyQt signal&slot æœºåˆ¶çš„ç†è§£å’Œåº”ç”¨]]></title>
    <url>%2F2017%2F05%2F18%2FPython%2F20170518%2F</url>
    <content type="text"><![CDATA[ä»‹ç»ä¸€ä¸‹Pythonè¯­è¨€ä¸‹çš„è§‚å¯Ÿè€…æ¨¡å¼å’Œå…¶åœ¨PyQtè¿ç”¨ å†…å®¹ä»‹ç» æä¾›signal&amp;slotçš„pythonå®ç°æ–¹å¼ï¼ˆæ›´å¤§çš„çµæ´»æ€§ï¼Œæ•ˆç‡ç›¸æ¯”PyQtè‡ªå¸¦æ›´ä½ï¼‰ PyQt å’Œ Python ä¸¤ç§å®ç°æ–¹å¼çš„ç‰¹è‰²å¯¹æ¯” PyQtç‰ˆ åŠŸèƒ½åŠ å¼º ä½¿slotå¯ä»¥æ¥å—åˆ°å…³é”®å­—å‚æ•° ç›¸å…³èµ„æº æ¥æº: è‹±æ–‡ å¤šæ ·åŒ–ä¿¡å· èµ„æ–™: PyQt5 å®˜æ–¹æ–‡æ¡£ ä¹¦ç±: Design PatternsIs an excellent summary and reference of many very useful patterns. ä¹¦ç±: Head First Design PatternsProvides a more gentle and explanatory view of many of the same patterns. è®¨è®º: SOF Custom pyqtSignal implementation Python signal&amp;slot ä¿¡å·&amp;æ§½çš„ Python å®ç°ä»‹ç» å› ä¸ºå®ç°æœºåˆ¶çš„æ˜¯Pythonä»£ç ä¸æ˜¯PyQtçš„c++ï¼Œæ•ˆç‡ä¼šæ›´ä½ æ›´è´´åˆPythonçš„é£æ ¼ï¼Œmore pythonicï¼Œé™åˆ¶æ›´å°‘ 1. ä¸èƒ½ç”¨å®ä¾‹å±æ€§æ›¿æ¢pyqtSignalçš„ç±»å±æ€§..è™½ç„¶ pySignal èµ·æºäº pyqtSignal è€Œä¸”ç›´æ¥å®ä¾‹åŒ– pySignal ç±»çš„å„ç§ä½¿ç”¨æ–¹å¼å’Œ pyqtSignalç›¸åŒï¼ˆæ¯•ç«Ÿè®¾è®¡çš„æ—¶å€™å°±æ¥å£ç›¸åŒï¼‰ï¼Œä½†æ˜¯æœ‰ä¸ªå®¹æ˜“è®©äººå›°æƒ‘çš„ç‚¹æ˜¯ 123456# ä»£ç ç¤ºä¾‹ï¼ŒpySignal åœ¨å®ä¾‹åŒ–åçš„ç±»ä¸­æ›¿æ¢ pyqtSignalclass Window(QWidget): same_signal = pyqtSignal() def __init__(self, parent=None): super(Window, self).__init__(parent) self.same_signal = Signal() å¸¸ç†æ¥è¯´ pyqtSignal() åº”è¯¥è¢« pySignal æ›¿æ¢æ‰äº†ï¼Œä½†å¦‚æ—©å…ˆæåˆ°çš„ pyqtSignal åœ¨æ‰€åœ¨ç±»å®ä¾‹åŒ–åæ‘‡èº«ä¸€å˜æˆå®ä¾‹åŒ–çš„PyQt5.QtCore.pyqtBoundSignalå¯¹è±¡ã€‚ è¿™ä»£è¡¨æˆ‘ä»¬å…ˆèµ‹å€¼çš„ç±»å±æ€§å·²ç»å˜æˆäº†å®ä¾‹åŒ–ç±»çš„å±æ€§äº† è¿™æ ·é€ æˆçš„å½±å“æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ç»™æŸç±»å¤šä¸ªå®ä¾‹ï¼Œå®ƒä»¬å°†æœ‰è‡ªå·±çš„signalè€Œä¸”äº’ä¸å¹²æ‰°ï¼ˆemit ä¹Ÿä¸å¹²æ‰°ï¼‰ æˆ‘ä»¬å®ç°çš„ç±»æ²¡æœ‰è¿™æ ·çš„ç‰¹æ€§ï¼Œç±»å±æ€§ä¸€ç›´æ˜¯ç±»å±æ€§ è¿™æ„å‘³ç€ç»™æŸç±»èµ‹å€¼ç±»å±æ€§ï¼Œå…¶å®ä¾‹ä¹Ÿä¼šé—ä¼ ç›¸åŒçš„ç±»å±æ€§ï¼ˆä¸ç‹¬ç«‹ï¼‰ è§£å†³æ–¹æ¡ˆæ˜¯ï¼ŒpySignalåœ¨æœ€å¼€å§‹å°±åº”è¯¥æ˜¯å®ä¾‹å±æ€§è€Œä¸æ˜¯ç±»å±æ€§ï¼ˆè¿™æ ·èƒ½ä¿è¯ç‹¬ç«‹ï¼‰ pySignal1234567891011121314151617class Signal: def __init__(self): self.__subscribers = [] def emit(self, *args, **kwargs): for subs in self.__subscribers: subs(*args, **kwargs) def connect(self, func): self.__subscribers.append(func) def disconnect(self, func): try: self.__subscribers.remove(func) except ValueError: print('Warning: function %s not removed ' 'from signal %s'%(func,self)) PyQt signal&amp;slotä»‹ç»1. signalåªèƒ½ä½œä¸ºç±»å±æ€§ Only works with class attributesSignals are not class attributes. PyQt5.QtCore.pyqtSignal() is merely a vessel for a future instance variable containing a PyQt*.QtCore.pyqtBoundSignal instance. When you instantiate your class, pyqtSignal goes to work and injects itself as an instance variable and adds itself to the QMetaObject of the class. QMetaObject? It comes with useful methods such as .className(), superClass(), methodCount() which returns the name of the class, its superclasses and number of methods respectively. In C++ these are probably very useful, however a Python programmer might not be very impressed. Itâ€™s something weâ€™ve had access to all along via any instancesâ€™ class, bases and dictattributes. 2.ä¸èƒ½åœ¨å·²ç»å®ä¾‹åŒ–çš„ç±»ä¸­å£°æ˜ Cannot be used in an already instantiated classè¿™æ˜¯æœ€è®©äººå¤´ç—›çš„ç‰¹æ€§ Now hereâ€™s the kicker. If youâ€™re doing any sort of base- or abstract class work with Qt widgets, youâ€™ll quickly realise that you canâ€™t inherit signals. Other than that, if try and bypass inheritance and have a builder spit out widgets for you, youâ€™ll also notice how Dependency Injection isnâ€™t going to work with signals. They have to be created as class attributes and they can only be created using pyqtSignal(). Please correct me if Iâ€™m wrong. 3.å¿…é¡»åœ¨å£°æ˜signalæ—¶æŒ‡æ˜ä¼ è¾“å‚æ•°çš„ç±»å‹ Must be pre-specified with any data-types you wish to emitç±»ä¼¼äºå¼ºç±»å‹è¯­è¨€çš„ç±»å‹å£°æ˜ï¼Œè¿™å®Œå…¨ä¸æ˜¯Pythonçš„é£æ ¼å˜›ã€‚In other languages, this is referred to as static typing. Python however doesnâ€™t do any of that. 123456789# è¿™æ˜¯æ¼”ç¤ºä»£ç ï¼ˆä¼ªä»£ç ï¼‰ï¼Œå®é™…ä¸Šå¾—ä½œä¸ºç±»å±æ€§å£°æ˜# normally have to be run via a class' class attribute.signal = pyqtSignal(int, str)signal.emit(my_number, my_string)signal.emit(my_string, my_number)# æŠ¥é”™ TypeErrorsignal.emit(not_enough_args)# æŠ¥é”™ TypeError 4. ä¸æ”¯æŒå…³é”®å­—å‚æ•° Does not support keyword arguments TypeError: emit() takes no keyword arguments Keyword arguments are quite useful as a means of self-documenting code. signal.emit(5)æœ¬åº”è¯¥å†™åšsignal.emit(velocity=5)è¿™æ ·ä¸ä»…å¢å¼ºå¯è¯»æ€§ï¼Œè¿˜å¯ä»¥åŠ å¼ºæœºåˆ¶ä½¿å…¶å¯ä»¥æºå¸¦ç›¸åŒå…³é”®å­—å‚æ•° it can also be used to enforce signals and slots to carry an identical argument signature. 12345678910111213141516def callback(name, address): print("Name=%s and address=%s" % (name, address))signal = Signal()signal.connect(callback)# Mistake the first argument for a tuple.signal.emit(names=('marcus', 'ottosson'), address='earth')# TypeError: callback() got an unexpected keyword argument 'names'# When actually, its a single string value.signal.emit(name='marcus ottosson', address='earth')# Name=marcus ottosson and address=earth# Of course, non-keyword arguments works too.signal.emit('marcus ottosson', 'earth') 5. Cannot be modified after instantiationPythonå¯¹è±¡ï¼Œå¾ˆè‡ªç„¶çš„æ”¯æŒ ä»£ç åŠ¨æ€ä¿®æ”¹ï¼ˆmonkey-patchï¼‰,ä½†pyqtSignalséå¸¸ç‰¹åˆ«çš„ä¸æ”¯æŒAs a Python object, you would expect the ability to monkey-patch, but pyqtSignals are special enough to not let you do any of that. Iâ€™ll provide an example of monkey-patching for you below. ç†è§£ Understanding Signals and SlotsQt æä¾›çš„ ä¿¡å·å’Œæ§½ æœºåˆ¶åŸºäºä¸€ä¸ª(è¡Œä¸ºå‹)è®¾è®¡æ¨¡å¼ -&gt;è§‚å¯Ÿè€…æ¨¡å¼ (Observer pattern) (TODO å¦å¼€ä¸€æ–‡è¯¦ç»†åˆ†æ Pythonçš„è§‚å¯Ÿè€…æ¨¡å¼) è·¨çº¿ç¨‹ä¸Šè¿°å®ç°å¾ˆç›´æ¥çš„ä»‹ç»äº†åŸºæœ¬åŸç†ä½†ç¼ºå°‘äº†å¾ˆå¤šåº”è¯¥è€ƒè™‘åˆ°çš„åº”ç”¨åœºæ™¯æ¯”å¦‚è·¨çº¿ç¨‹ã€‚ åœ¨ä½¿ç”¨pySignalæ—¶ä½ å¯èƒ½å·²ç»é‡åˆ°slotæ‰€åœ¨çš„çº¿ç¨‹å¾ˆå®¹æ˜“å´©æºƒï¼ˆæ— è®ºæ˜¯åœ¨ QThread æˆ–è€… Pythonçš„å¤šçº¿ç¨‹æ¨¡å—ï¼‰ï¼Œè¿™â€œæ€ªç½ªäºâ€å¤šçº¿ç¨‹ä¹‹ç¾ï¼Œä¸¤ä¸ªçº¿ç¨‹å¯èƒ½åŒæ—¶å°è¯•æˆ–è®¿é—®åŒä¸€èµ„æº. QObject.sender()ç®€è€Œè¨€ä¹‹, QObject.sender() å¯ä»¥è®©æ¥æ”¶ç«¯å¯ä»¥è·å¾—å‘é€ç«¯èµ„æºã€‚ 1234def callback(self, message): # åœ¨ pySignal å’Œ pyqtSignal ä¸­éƒ½æ”¯æŒslotä¸­æŸ¥è¯¢æ¥æºsignal source_of_signal = self.sender() # è¿™åœ¨å½“slotå¯èƒ½æ”¶åˆ°å¤šä¸ªæ¥æºçš„signalä¸”éœ€è¦åŒºåˆ†ä»–ä»¬çš„æ—¶å€™éå¸¸æœ‰ç”¨ APIå‚è€ƒèµ„æ–™ä¸­è­¦å‘Šè¯´è¿™ç§æ–¹å¼å¯èƒ½ä¼šç ´åé¢å‘å¯¹è±¡ç¨‹åºçš„æ¨¡å—æ€§ï¼Œå»ºè®®å°½é‡é¿å… åœ¨è¿™é‡Œæˆ‘ä¸å‡†å¤‡æä¾›å…¨æ–¹ä½çš„æµ‹è¯„, ä½†pyç‰ˆç›¸æ¯”qtç‰ˆ pyqtSignal(), å¦‚æœæ˜¯obj1 -&gt; obj2 -&gt; obj3 è¿™ç§é“¾å¼è°ƒç”¨çš„è¯ï¼Œåœ¨obj3çš„slotä¸­æŸ¥è¯¢senderçš„è¯ä¼šè¿”å›obj1 123456# åœ¨ obj3.listen ä¸­è°ƒç”¨sender()ä¼šè¿”å› obj1è€Œä¸æ˜¯obj2ï¼Œè™½ç„¶obj2æ˜¯è°ƒç”¨obj3çš„signalobj1.signal.connect(obj2.emit)obj2.signal.connect(obj3.listen)obj1.signal.emit()# è€Œåœ¨ pyqtSignal, å°†ä¼šè¿”å› obj2. åº”ç”¨Example â€“ ç›‘è§†ç±»å±æ€§çš„çŠ¶æ€It can sometimes be useful to monitor an attribute of a class. 12345678910111213141516171819202122232425262728293031323334353637class Listener(object): def __init__(self): self.container = Container() self.container.value_changed.connect(self.value_changed_event) def value_changed_event(self, previous, current): print("%r says: Value was changed from %s to %s" % (self.__class__.__name__, previous, current))class Container(object): def __init__(self): self.__value = None # å½“`value` æ”¹å˜äº†æˆ‘ä»¬å°±å‘é€ä¿¡å· self.value_changed = core.Signal() @property def value(self): return self.__value @value.setter def value(self, value): self.value_changed.emit(previous=self.__value, current=value) self.__value = valueif __name__ == '__main__': list = Listener() # æ”¹å˜valueå€¼ä¾¿ä¼šè§¦å‘ list.container.value = 5 # 'Listening' ä¸­æ‰“å°: Value was changed from None to 5 list.container.value = 6 # 'Listening' ä¸­æ‰“å°: Value was changed from 5 to 6 æ€»ç»“ åœ¨æŸäº›å¤æ‚çš„åœºæ™¯ä¸‹ï¼Œå³ä½¿åŠŸèƒ½å¼ºå¤§çš„pyqtSignalä¹Ÿä¼šè§¦çŸ­æ¿,è¿™ä¸ªæ—¶å€™å°±å¯ä»¥æ‰©å±•æˆ–è‡ªå·±å®ç° ä½†é€‰æ‹©ä¸ç«™åœ¨å·¨äººè‚©è†€ä¸Šè€Œè‡ªå·±å®ç°æŸä¸€ç‰¹æ€§çš„è¯ï¼Œæœ‰äº›æƒ…å†µæˆ‘ä»¬ä¼šåœ¨é‡åˆ°æ—¶å‘ç°ï¼ˆåƒå…ˆæåˆ°çš„çº¿ç¨‹é—´çš„å®‰å…¨æ€§ï¼‰ã€‚è¿™ä¸ªæ—¶å€™å°±ä¸å¾—ä¸æŒ‘èµ·è‡ªå·±åŠ¨æ‰‹å®ç°æ–°ç‰¹æ€§çš„æ‹…å­ã€‚ è™½ç„¶ä¸¤ç§signalæœºåˆ¶çš„å®ç°ç›®çš„æ˜¯ä¸€æ ·çš„ï¼Œä½†å®ƒä»¬ä¸ä¸€å®šéœ€è¦ç”¨è°æ¥æ›¿æ¢è°ã€‚å¯èƒ½æœ€å¥½çš„æ–¹å¼æ˜¯ä¸¤ä¸ªåœ¨ä»£ç ä¸­åŒæ—¶ä½¿ç”¨ï¼Œå„å–æ‰€é•¿ï¼Œåœ¨å„è‡ªé€‚åˆçš„åº”ç”¨åœºæ™¯ä½¿ç”¨ã€‚ä¾‹å¦‚ï¼ŒQThreads å¯ä»¥ä½¿ç”¨ pyqtSignal è€Œæˆ‘ä»¬è‡ªå®šä¹‰çš„ç»„ä»¶çš„åŸºç±»å’Œåˆ¶é€ å™¨(TODO builders)å°±å¯ä»¥ä½¿ç”¨ pySignal]]></content>
      <categories>
        <category>Python</category>
      </categories>
      <tags>
        <tag>PyQt</tag>
        <tag>è§‚å¯Ÿè€…æ¨¡å¼</tag>
      </tags>
  </entry>
</search>
